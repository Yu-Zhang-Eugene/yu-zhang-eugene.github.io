{% include base_path %}

<div class="masthead" style="padding: 2pt 4pt; background-color: #0C2340;">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu" style="background-color: #0C2340;">
      <nav id="site-nav" class="greedy-nav" style="background-color: #0C2340;">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg" style="background-color: #0C2340;">
            <a href="{{ '/' | relative_url }}"><span style="color: white;">{{ site.title }}</span></a>
          </li>

          {% for link in site.data.navigation.main %}
            {% if link.children %}
              <li class="masthead__menu-item dropdown" style="background-color: #0C2340; position: relative;">
                <a href="#" class="dropdown-toggle" style="color: white;">{{ link.title }}</a>
                <ul class="dropdown-menu"
                    style="display: none; position: absolute; top: 100%; left: 0; background-color: white;
                           list-style: none; margin: 0; padding: 0; min-width: 180px; z-index: 999;">
                  {% for child in link.children %}
                    {% assign is_external = child.url contains 'http' %}
                    <li>
                      <a href="{% if is_external %}{{ child.url }}{% else %}{{ child.url | relative_url }}{% endif %}"
                         style="display: block; padding: 5px 12px; color: black; text-decoration: none;">
                        {{ child.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </li>
            {% else %}
              {% assign is_external = link.url contains 'http' %}
              <li class="masthead__menu-item" style="background-color: #0C2340;">
                <a href="{% if is_external %}{{ link.url }}{% else %}{{ link.url | relative_url }}{% endif %}">
                  <span style="color: white;">{{ link.title }}</span>
                </a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
        <ul class="hidden-links hidden" style="background-color: #0C2340;"></ul>
      </nav>
    </div>
  </div>
</div>

<script>
  function toggleDropdown(el) {
    // Close all other dropdowns
    document.querySelectorAll(".dropdown-menu").forEach(menu => {
      if (menu !== el.nextElementSibling) menu.style.display = "none";
    });

    const menu = el.nextElementSibling;
    if (menu) {
      menu.style.display = (menu.style.display === "block") ? "none" : "block";
    }
  }

  // Add click listeners
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".dropdown-toggle").forEach(toggle => {
      toggle.addEventListener("click", function (event) {
        event.preventDefault();
        toggleDropdown(this);
      });
    });

    // Close dropdown if you click outside
    document.addEventListener("click", function (event) {
      const isDropdown = event.target.closest('.dropdown');
      if (!isDropdown) {
        document.querySelectorAll(".dropdown-menu").forEach(menu => {
          menu.style.display = "none";
        });
      }
    });
  });
</script>